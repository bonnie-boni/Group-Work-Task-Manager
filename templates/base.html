{% load static %}<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Classroom Manager{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <style>
        .session-timer {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen">
    {% if is_authenticated %}
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
            <button class="navbar-hamburger" id="navbar-hamburger">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
            <div class="navbar-brand">
                <svg class="w-8 h-8 inline-block mr-2" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                </svg>
                Classroom Manager
            </div>
            
            <div class="navbar-user">
                <span class="user-badge">
                    {{ current_user.email }}
                    <span class="badge 
                        {% if is_lecturer %}badge-primary
                        {% elif is_leader %}badge-primary
                        {% else %}badge-success{% endif %}">
                        {{ current_user.role|upper }}
                    </span>
                </span>
            </div>
        </div>
    </nav>
    {% endif %}

    <!-- Messages -->
    {% if messages %}
    <div class="container mt-lg">
        {% for message in messages %}
        <div class="alert {% if message.tags == 'error' %}alert-error
            {% elif message.tags == 'warning' %}alert-warning
            {% elif message.tags == 'success' %}alert-success
            {% else %}alert-info{% endif %} fade-in">
            <span class="alert-icon">
                {% if message.tags == 'success' %}✓
                {% elif message.tags == 'error' or message.tags == 'danger' %}✕
                {% elif message.tags == 'warning' %}⚠
                {% else %}ℹ{% endif %}
            </span>
            <span>{{ message }}</span>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Main Content -->
    <main class="container">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900/50 border-t mt-[0%] py-lg">
        <div class="container text-center text-gray-500 text-sm">
            <p>© 2025 Classroom Management System | All rights reserved</p>
        </div>
    </footer>

    {% block extra_js %}
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Hamburger menu to toggle sidebar
            const navbarHamburger = document.getElementById('navbar-hamburger');
            const sidebar = document.querySelector('.sidebar');
            
            if (navbarHamburger && sidebar) {
                navbarHamburger.addEventListener('click', function () {
                    sidebar.classList.toggle('active');
                });
            }
            
            // Sidebar toggle functionality
            const sidebarToggleBtn = document.getElementById('sidebar-toggle');
            const sidebarClose = document.getElementById('sidebar-close');
            
            if (sidebarToggleBtn && sidebar) {
                sidebarToggleBtn.addEventListener('click', function () {
                    sidebar.classList.toggle('active');
                });
            }
            
            if (sidebarClose && sidebar) {
                sidebarClose.addEventListener('click', function () {
                    sidebar.classList.remove('active');
                });
            }
            
            // Close sidebar when clicking on a link (mobile)
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function () {
                    if (window.innerWidth <= 768) {
                        sidebar.classList.remove('active');
                    }
                });
            });
        });
    </script>
    {% endblock %}
</body>
</html>
