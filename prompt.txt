üß† CLAUDE PROMPT: DJANGO + MONGODB CLASSROOM MANAGEMENT SYSTEM

Environment: Linux Mint (local setup)
Frontend: Django Templates + TailwindCSS
Backend: Django 4.x
Database: MongoDB
PDF Engine: WeasyPrint (preferred) or ReportLab (fallback)
Auth: Session-based (2-hour expiry)
Real-time: Disabled ‚Äî use polling refresh for updates

1. PROJECT OVERVIEW

Create a Django + MongoDB web application for classroom task and group management with three roles:

Lecturer: Creates classes, uploads tasks, views group submissions, downloads compiled group PDFs.

Group Leader: Creates groups, whitelists members, divides tasks among members, compiles their submissions into one group PDF.

Member: Views assigned tasks and leader‚Äôs banner, types and submits their work (text only), which is auto-generated into a PDF.

Default role = Member. Lecturer role is assigned manually in the MongoDB collection.

2. TECH STACK & INSTALLATION (Linux Mint)

Claude should provide commands for environment setup:

sudo apt update && sudo apt install python3 python3-venv python3-pip mongodb redis-server -y
pip install django djangorestframework pymongo mongoengine weasyprint reportlab pillow django-tailwind


Use Django 4.x, Python >= 3.10.

3. DATABASE DESIGN (MongoDB Collections)

Claude must define MongoDB collections using PyMongo or MongoEngine, with sample documents and indexes.

users

{
  "_id": "ObjectId",
  "email": "user@example.com",
  "password_hash": "hashed",
  "role": "lecturer|leader|member|admin",
  "whitelisted_groups": ["group_id"],
  "created_at": "timestamp"
}


classes

{
  "_id": "ObjectId",
  "name": "AI101",
  "password_hash": "hashed",
  "lecturer_id": "user_id",
  "groups": ["group_id"],
  "tasks": ["task_id"]
}


groups

{
  "_id": "ObjectId",
  "class_id": "class_id",
  "leader_id": "user_id",
  "name": "Group A",
  "password_hash": "hashed",
  "members": ["user_ids"],
  "whitelist_emails": ["email1", "email2"],
  "created_at": "timestamp"
}


tasks

{
  "_id": "ObjectId",
  "class_id": "class_id",
  "lecturer_id": "user_id",
  "title": "Assignment 1",
  "description": "Research AI ethics",
  "created_at": "timestamp",
  "due_date": "timestamp",
  "divisions": [{"member_id": "user_id", "part_description": "Question 1"}]
}


submissions

{
  "_id": "ObjectId",
  "task_id": "task_id",
  "group_id": "group_id",
  "member_id": "user_id",
  "text_answer": "Text of submission",
  "pdf_path": "/media/submissions/user1_task1.pdf",
  "submitted_at": "timestamp",
  "status": "submitted|not_submitted"
}


compiled_submissions

{
  "_id": "ObjectId",
  "group_id": "group_id",
  "task_id": "task_id",
  "compiled_pdf_path": "/media/compiled/groupA_task1.pdf",
  "compiled_at": "timestamp"
}


Claude should add indexes for performance:

email (unique)

class_id

group_id

task_id

4. DJANGO BACKEND SETUP

Claude must generate:

Project layout: classroom_manager/ and app/

settings.py configured for MongoDB (via pymongo or mongoengine.connect())

Session setup:

SESSION_COOKIE_AGE = 7200  # 2 hours
SESSION_EXPIRE_AT_BROWSER_CLOSE = False
SESSION_SAVE_EVERY_REQUEST = False


Views + URLs for:

Login/Logout (Django sessions)

Lecturer: create class, add tasks, view groups, download compiled PDFs

Group Leader: create group, whitelist members, divide tasks, compile PDFs

Member: submit task ‚Üí backend saves text + generates individual PDF

Role-based middleware for permissions

File storage setup: MEDIA_ROOT, MEDIA_URL

Claude must include models.py, views.py, urls.py, forms.py with full working examples and comments.

5. FRONTEND (DJANGO TEMPLATES + TAILWIND)

Claude should build Tailwind-enabled templates for each role:

Templates:

base.html ‚Äì shared navbar, logout, session info

login.html ‚Äì login form with role selection

lecturer_dashboard.html ‚Äì list of classes, tasks, and groups

class_detail.html ‚Äì manage tasks and view group submissions

group_leader_dashboard.html ‚Äì create groups, whitelist members, task divisions, compile PDF button

member_dashboard.html ‚Äì view tasks, banners, textarea for submission, submit button

All templates styled using Tailwind CSS dashboard layout (cards, tables, status badges).

6. POLLING FOR UPDATES

Claude must implement JavaScript polling for task and submission updates:

Every 15 seconds, fetch /poll/tasks/ or /poll/submissions/

Refresh relevant HTML sections dynamically (using Fetch API and DOM update)

Example snippet for polling:

setInterval(() => {
  fetch('/poll/tasks/')
    .then(res => res.json())
    .then(data => updateTaskList(data));
}, 15000);

7. SECURITY & VALIDATION

Claude should implement:

Password hashing (Django PBKDF2)

Session-based CSRF protection

Input validation for forms

Email format checks

Sanitization to prevent XSS (no raw HTML allowed)

Secure PDF file handling (unique filenames)

Role-based access decorator

Rate limit login using django-ratelimit

8. PDF GENERATION FLOW

Claude must build:

Member Submission Flow:
When a member submits text, backend generates PDF using WeasyPrint or ReportLab, stores file, and updates MongoDB with pdf_path.

Group Leader Compilation:
Combines member PDFs into one group submission PDF using PyPDF2.

Lecturer Download:
Lecturer can download compiled group PDF securely from dashboard.

Claude should include full example code for WeasyPrint + fallback to ReportLab.

9. LOCAL DEPLOYMENT (LINUX MINT)

Claude should output:

python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python manage.py runserver


Database setup:

sudo systemctl start mongodb


Tailwind setup using django-tailwind:

python manage.py tailwind init
python manage.py tailwind start

10. TESTING & QA

Claude must provide:

Unit tests for login, class creation, task posting, submission, and PDF generation

Example Django TestCase class

Seed script to create test users and a sample class

Checklist for manual testing:

Session expiry

Role access

PDF generation

Submission flow

11. FINAL OUTPUT FORMAT EXPECTED FROM CLAUDE

Claude should output:

Full project structure

Complete models, views, urls, forms

All HTML templates

Sample PDF generation code

README.md with setup steps for Linux Mint

Example unit tests

Seed script to populate DB with example lecturer, leader, members

One-paragraph system behavior summary

12. TONE & OUTPUT RULES FOR CLAUDE

Claude must:

Write complete runnable code (not pseudocode)

Include file paths and context for each block

Use clear comments for non-obvious sections

Provide both WeasyPrint and ReportLab options

Explain each major step briefly

Avoid ‚Äúimplement this later‚Äù placeholders

‚úÖ CONCLUSION

This Django + MongoDB project should let:

Lecturers create classes and manage tasks

Group leaders create groups, assign tasks, and compile submissions and upon submit they automatically generate PDFs

Members submit text tasks to the group leaders 